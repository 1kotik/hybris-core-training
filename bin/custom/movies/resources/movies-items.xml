<?xml version="1.0" encoding="ISO-8859-1"?>

<items xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="items.xsd">
    <collectiontypes>
        <collectiontype code="CustomStringSet" elementtype="java.lang.String" generate="false" autocreate="true" type="set"/>
    </collectiontypes>

    <enumtypes>
        <enumtype code="AgeRating" generate="true" autocreate="true" dynamic="false">
            <value code="G"/>
            <value code="PG"/>
            <value code="PG13"/>
            <value code="R"/>
            <value code="NC17"/>
        </enumtype>
        <enumtype code="MovieGenre" generate="true" autocreate="true" dynamic="true"/>
    </enumtypes>

    <maptypes>
        <maptype code="SeatType2BigDecimal" argumenttype="SeatType" returntype="java.math.BigDecimal" autocreate="true" generate="false"/>
    </maptypes>

    <relations>
		<relation code="MovieGenres2Products" autocreate="true" generate="true" localized="false">
            <deployment table="MovieGenres2ProductsRel" typecode="10005"/>
            <sourceElement qualifier="movieGenres" type="MovieGenre" cardinality="many" collectiontype="set" ordered="false"/>
            <targetElement qualifier="products" type="Product" cardinality="many" collectiontype="set" ordered="false"/>
        </relation>

        <relation code="Cinema2CinemaHalls" autocreate="true" generate="true" localized="false">
            <sourceElement qualifier="cinema" type="Cinema" cardinality="one">
                <modifiers optional="false" initial="true"/>
            </sourceElement>
            <targetElement qualifier="halls" type="CinemaHall" cardinality="many" collectiontype="set" ordered="false"/>
        </relation>

        <relation code="MovieShow2Tickets" autocreate="true" generate="false" localized="false">
            <sourceElement qualifier="movieShow" type="MovieShow" cardinality="one">
                <modifiers optional="false" initial="true"/>
            </sourceElement>
            <targetElement qualifier="tickets" type="Ticket" cardinality="many" collectiontype="set" ordered="false"/>
        </relation>

    </relations>

    <itemtypes>
        <itemtype code="Product" generate="true" autocreate="false">
            <attributes>
                <attribute qualifier="releaseDate" type="java.lang.Integer">
                    <description>Year when movie was released</description>
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="originCountry" type="localized:java.lang.String">
                    <description>Country where movie was made</description>
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="averageRating" type="java.lang.Double">
                    <description>Average movie rating</description>
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="actors" type="CustomStringSet">
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="director" type="localized:java.lang.String">
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="ageRating" type="AgeRating">
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="productionDetails" type="MovieProductionDetails">
                    <persistence type="property"/>
                </attribute>
            </attributes>
        </itemtype>

        <itemtype code="MovieShow" extends="VariantProduct" autocreate="true" generate="true">
            <attributes>
                <attribute qualifier="screeningDate" type="java.util.Date">
                    <persistence type="property"/>
                </attribute>
				<attribute qualifier="pricePerSeatType" type="SeatType2BigDecimal">
					<persistence type="property"/>
				</attribute>
                <attribute qualifier="cinemaHall" type="CinemaHall">
                    <persistence type="property"/>
                </attribute>
            </attributes>
        </itemtype>

		<itemtype code="Ticket" autocreate="true" generate="true">
			<deployment table="Tickets" typecode="10004"/>
			<attributes>
				<attribute qualifier="code" type="java.lang.Long">
					<description>Unique ticket code</description>
					<modifiers optional="false" initial="true" unique="true"/>
					<persistence type="property"/>
				</attribute>
				<attribute qualifier="purchaseDate" type="java.util.Date">
					<persistence type="property"/>
				</attribute>
                <attribute qualifier="seat" type="Seat">
                    <persistence type="property"/>
                </attribute>
			</attributes>
		</itemtype>
        
        <itemtype code="MovieProductionDetails" generate="true" autocreate="true">
            <deployment table="MoviesProductionDetails" typecode="10006"/>
            <attributes>
                <attribute qualifier="code" type="java.lang.Long">
                    <description>Unique movie details code</description>
                    <modifiers optional="false" initial="true" unique="true"/>
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="productionCompanies" type="CustomStringSet">
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="executiveProducers" type="CustomStringSet">
                    <persistence type="property"/>
                </attribute>
                <attribute qualifier="budgetUSD" type="java.math.BigDecimal">
                    <modifiers optional="false" initial="true" unique="true"/>
                    <persistence type="property"/>
                </attribute>
            </attributes>
        </itemtype>
    </itemtypes>
</items>
